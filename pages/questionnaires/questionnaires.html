<!doctype html>
<style>
  .student-name {
    flex: 1;
    margin: 0;
  }

  .questions {
    margin-top: 5px;
  }

  .question {
    font-style: italic;
    margin: 3px 0;
  }

  .answer {
    color: green;
    font-weight: bold;
  }

  .questionnaire {
    background-color: #f4f4f4;
  }

  .questionnaire-header {
    display: flex;
  }
</style>
<div class="page">
  <a href="/add-questionnaire" class="button"">
    Adicionar Avaliação
  </a>
  <div class="container" id="questionnaireList"></div>
</div>

<script>
  const questionnaires = [
    {
      student: "João Silva",
      responses: [
        {question: "Como foi a sutura?", answer: "Ótima"},
        {question: "Higienização correta?", answer: "Adequada"},
      ],
    },
    {
      student: "Maria Oliveira",
      responses: [
        {
          question: "Uso correto dos instrumentos?",
          answer: "Precisa melhorar",
        },
        {question: "Técnica estéril?", answer: "Boa"},
      ],
    },
  ];

  const listContainer = document.getElementById("questionnaireList");

  function renderQuestionnaires() {
    listContainer.innerHTML = "";
    questionnaires.forEach((q, index) => {
      const div = document.createElement("div");
      div.className = "container questionnaire";
      let questionsHtml = "";
      q.responses.forEach((r) => {
        questionsHtml += `<div class="question">${r.question}</div><div class="answer">Resposta: ${r.answer}</div>`;
      });
      div.innerHTML = `
                    <div class="questionnaire-header">
                      <h3 class="student-name">${q.student}</h3>
                      <div class="button-container">
                          <button class="small-button button-update" onclick="updateQuestionnaire(${index})">Atualizar</button>
                          <button class="small-button button-delete" onclick="deleteQuestionnaire(${index})">Excluir</button>
                      </div>
                    </div>
                    <div class="questions">${questionsHtml}</div>
                `;
      listContainer.appendChild(div);
    });
  }

  function updateQuestionnaire(index) {
    alert(
      `Função para atualizar a avaliação de ${questionnaires[index].student}`,
    );
  }

  function deleteQuestionnaire(index) {
    if (confirm("Tem certeza que deseja excluir esta avaliação?")) {
      questionnaires.splice(index, 1);
      renderQuestionnaires();
    }
  }

  renderQuestionnaires();
</script>
